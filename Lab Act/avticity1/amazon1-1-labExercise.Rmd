---
title: "lab_Exercise1"
author: "Quillo, Carl Louie"
date: "2024-02-07"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}

library(dplyr)
library(rvest)
library(polite)
library(httr)
library(selectr)
library(xml2)

productreviewss = data.frame()


link01 <- "https://www.amazon.co.uk/Harry-Potter-Junior-Official-License/product-reviews/B092QX6QZ3/ref=cm_cr_arp_d_paging_btm_next_2?ie=UTF8&reviewerType=all_reviews&pageNumber=2"

link02 <- "https://www.amazon.co.uk/Harry-Potter-Junior-Official-License/product-reviews/B092QX6QZ3/ref=cm_cr_getr_d_paging_btm_next_3?ie=UTF8&reviewerType=all_reviews&pageNumber=3"

link03 <- "https://www.amazon.co.uk/Harry-Potter-Junior-Official-License/product-reviews/B092QX6QZ3/ref=cm_cr_getr_d_paging_btm_next_4?ie=UTF8&reviewerType=all_reviews&pageNumber=4"

link04 <- "https://www.amazon.co.uk/Harry-Potter-Junior-Official-License/product-reviews/B092QX6QZ3/ref=cm_cr_getr_d_paging_btm_next_4?ie=UTF8&reviewerType=all_reviews&pageNumber=4"

link05 <- "https://www.amazon.co.uk/s?k=table&page=5&crid=NG7DYIBSBUUL&qid=1707353911&sprefix=table%2Caps%2C281&ref=sr_pg_5"

link06 <- "https://www.amazon.co.uk/s?k=table&page=6&crid=NG7DYIBSBUUL&qid=1707355447&sprefix=table%2Caps%2C281&ref=sr_pg_6"

```

```{r}
#link 1
  session1 <- bow("https://www.amazon.co.uk/Harry-Potter-Junior-Official-License/product-reviews/B092QX6QZ3/ref=cm_cr_arp_d_paging_btm_next_2?ie=UTF8&reviewerType=all_reviews&pageNumber=2",
               user_agent = "For Educational Purpose")

  scrapeNodes <- function(selector){
    scrape(session1) %>%
      html_nodes(selector) %>%
      html_text(trim = TRUE)
  }
  
  product_category <- "chair"
  product_category <- rep(product_category, 10)
  product_category <- product_category[1:10]
  
  product_name <- scrapeNodes("h1.a-size-large.a-text-ellipsis")
  product_name <- rep(product_name, 10)
  product_name <- product_name[1:10]
  
  product_reviewer <- scrapeNodes("span.cr-original-review-content")
  product_reviewer <- product_reviewer[1:10]
  
  product_review <- scrapeNodes("span.cr-original-review-content")
  product_review <- product_review[1:10]
  
  product_date <- scrapeNodes("span.a-size-base.a-color-secondary.review-date")
  product_date <- product_date[1:10]
  
  product_rating <- scrapeNodes("span.a-icon-alt")
  product_rating <- product_rating[1:10]
  
  
  productsreview1 <- rbind(productreviewss, data.frame(
                      category = product_category,
                      name = product_name,
                      reviewer = product_reviewer,
                      reviews = product_review,
                      "date of review" = product_date,
                      ratings = product_rating))
  
```



```{r}
#link 2
  session2 <- bow(link02,
               user_agent = "For Educational Purpose")

  scrapeNodes <- function(selector){
    scrape(session2) %>%
      html_nodes(selector) %>%
      html_text(trim = TRUE)
  }
  
  product_category <- "chair"
  product_category <- rep(product_category, 10)
  product_category <- product_category[1:10]
  
  product_name <- scrapeNodes("h1.a-size-large.a-text-ellipsis")
  product_name <- rep(product_name, 10)
  product_name <- product_name[1:10]
  
  product_reviewer <- scrapeNodes("span.cr-original-review-content")
  product_reviewer <- product_reviewer[1:10]
  
  product_review <- scrapeNodes("span.cr-original-review-content")
  product_review <- product_review[1:10]
  
  product_date <- scrapeNodes("span.a-size-base.a-color-secondary.review-date")
  product_date <- product_date[1:10]
  
  product_rating <- scrapeNodes("span.a-icon-alt")
  product_rating <- product_rating[1:10]
  
  
  productsreview2 <- rbind(productreviewss, data.frame(
                      category = product_category,
                      name = product_name,
                      reviewer = product_reviewer,
                      reviews = product_review,
                      "date of review" = product_date,
                      ratings = product_rating))
  
```



```{r}
#link 3
  session3 <- bow(link03,
               user_agent = "For Educational Purpose")

  scrapeNodes <- function(selector){
    scrape(session3) %>%
      html_nodes(selector) %>%
      html_text(trim = TRUE)
  }
  
  product_category <- "chair"
  product_category <- rep(product_category, 10)
  product_category <- product_category[1:10]
  
  product_name <- scrapeNodes("h1.a-size-large.a-text-ellipsis")
  product_name <- rep(product_name, 10)
  product_name <- product_name[1:10]
  
  product_reviewer <- scrapeNodes("span.cr-original-review-content")
  product_reviewer <- product_reviewer[1:10]
  
  product_review <- scrapeNodes("span.cr-original-review-content")
  product_review <- product_review[1:10]
  
  product_date <- scrapeNodes("span.a-size-base.a-color-secondary.review-date")
  product_date <- product_date[1:10]
  
  product_rating <- scrapeNodes("span.a-icon-alt")
  product_rating <- product_rating[1:10]
  
  
  productsreview3 <- rbind(productreviewss, data.frame(
                      category = product_category,
                      name = product_name,
                      reviewer = product_reviewer,
                      reviews = product_review,
                      "date of review" = product_date,
                      ratings = product_rating))
  
```

```{r}

reviewof1stproduct =data.frame()
reviewof1stproduct = rbind(productsreview1,productsreview2,productsreview3)




```

